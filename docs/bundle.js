(()=>{function p(){let c="MEAL-ITEM-SELECTOR-theme",e=document.querySelector(".theme-toggler"),o=e.querySelector(".light .visually-hidden"),r=e.querySelector(".dark .visually-hidden"),a=e.querySelector("button");function i(){try{let s=localStorage.getItem(c);return s!==null?JSON.parse(s):!0}catch(s){return console.error("Error parsing theme from localStorage:",s),!0}}let t=i();function l(s){t=s,document.documentElement.classList.toggle("darkmode",t),localStorage.setItem(c,t),f()}function S(){l(!t)}function f(){o.textContent=t?" theme active":" theme inactive",r.textContent=t?" theme inactive":" theme active",a.setAttribute("aria-pressed",t?"false":"true")}a.addEventListener("click",S),l(t)}function h(){window.addEventListener("load",()=>{let n=document.getElementById("loader"),c=document.getElementById("page-loaded");n.classList.add("loader-hidden"),n.addEventListener("transitionend",()=>{n.remove(),c.textContent="Page has loaded.",c.setAttribute("aria-hidden","false")})})}function d(n,c){for(let e in c)n.setAttribute(e,c[e])}var L=document.querySelectorAll("[data-checkbox-starters]"),A=document.querySelectorAll("[data-checkbox-mains]"),I=document.querySelectorAll("[data-checkbox-vegetables]"),w=document.querySelectorAll("[data-checkbox-desserts]"),q=document.querySelectorAll("[data-checkbox-drinks]"),u=[{elements:L,selector:"[data-checkbox-starters]",limit:2},{elements:A,selector:"[data-checkbox-mains]",limit:1},{elements:I,selector:"[data-checkbox-vegetables]",limit:3},{elements:w,selector:"[data-checkbox-desserts]",limit:1},{elements:q,selector:"[data-checkbox-drinks]",limit:1}];function g(){let n=form.querySelectorAll('input[type="checkbox"]');n.forEach(c=>{c.addEventListener("change",()=>{let e=[...n].some(r=>r.checked),o=document.querySelector("[data-warning='no-selection']");e&&o&&o.remove()})})}function x(n,c,e){if(n.length<=e)return;let o=document.createElement("p");d(o,{class:"warning",role:"alert","data-warning":c}),n.forEach(r=>{r.addEventListener("change",a=>{if(document.querySelectorAll(`${c}:checked`).length>e){a.target.checked=!1,o.textContent=`Maximum ${e} items allowed.`;let t=a.target.closest("fieldset");t.contains(o)||t.appendChild(o)}else o.isConnected&&o.remove()})})}var v=0;function m(n){v>0&&(n.loading="lazy"),v++}function E(n,c){let e=document.createElement("div");e.classList.add("food-container","flow");let o=document.createElement("h2"),r=document.createElement("ul");n.forEach(a=>{if(a.checked&&c){let i=a.closest("fieldset").id;o.textContent=i.slice(0,-1);let t=document.createElement("li"),l=a.value.split("-").join(" "),f=a.closest("div").querySelector("[data-price]").textContent,s=document.createElement("img");d(s,{src:`./img/${i}/${a.value}.png`,width:175,alt:""}),m(s);let C=document.createElement("p");C.textContent=`${l} / \xA3${f}`,t.append(s,C),r.append(t),e.append(o,r),output.append(e)}})}function b(n){let c=document.querySelectorAll("input[type='checkbox']"),e=[];c.forEach(i=>{if(i.checked){let l=i.closest("div").querySelector("[data-price]");e.push(Number(l.textContent))}});let r=[...e].reduce((i,t)=>i+t,0).toFixed(2),a=document.createElement("p");a.classList.add("total"),a.textContent=`Total: \xA3${r}`,n.append(a)}function y(){if(!document.getElementById("home"))return;let c=document.getElementById("form"),e=document.getElementById("submit"),o=document.getElementById("output");u.forEach(r=>{x(r.elements,r.selector,r.limit)}),g(),c.addEventListener("submit",r=>{r.preventDefault();let a=5;for(let l=0;l<a;l++)E(u[l].elements,u[l].selector);if(o.childNodes.length===0){if(!document.querySelector("[data-warning='no-selection']")){let l=document.createElement("p");d(l,{class:"warning",role:"alert","data-warning":"no-selection"}),l.textContent="You must select at least 1 item before you submit the form",e.after(l)}return}let i=document.getElementById("main-heading");i.textContent="You chose:";let t=document.createElement("button");t.textContent="Start again?",t.type="button",t.addEventListener("click",()=>window.location.reload()),b(o),o.after(t),d(o,{class:"output flow",role:"alert",tabindex:"-1"}),o.focus(),r.target.remove()})}function k(){if(!document.getElementById("image-credits"))return;document.querySelectorAll("img").forEach(e=>{m(e)})}p();h();y();k();})();
